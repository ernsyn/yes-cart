<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright 2009 Denys Pavlov, Igor Azarnyi
  ~
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:cache="http://www.springframework.org/schema/cache"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/cache
	                       http://www.springframework.org/schema/cache/spring-cache.xsd
	                       http://www.springframework.org/schema/util
	                       http://www.springframework.org/schema/util/spring-util.xsd">

    <cache:annotation-driven/>




    <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager"
          p:cacheManager-ref="ehcache"/>

    <bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
          p:configLocation="classpath:ehcache.xml"
          p:shared="true"/>

    <!--
        use org.yes.cart.domain.entity.cache.HibernateEhCacheRegionFactory as cache factory provider to
        have cacheManager singleton with correct configurations applied. If we do not feed this in as
        static then there is no guarantee in which order the cache manager instance (race condition
        between hibernate and Spring) is created and which configuration is applied
        This was proven by debug as part of investigation in YC-315
     -->
    <!--<bean id="hibernateCacheManagerProvider" class="org.yes.cart.domain.entity.cache.HibernateEhCacheRegionFactory">-->
        <!--<property name="cacheManager" ref="cacheManager"/>-->
    <!--</bean>-->


    <bean id="cacheKeyGeneratorCollectionToString" class="org.yes.cart.service.domain.cache.impl.CollectionToStringKeyGenerator"/>

    <!-- ###################### Attributes  ################################################################################################################## -->

    <util:set id="AttributeAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-availableAttributesByProductTypeId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-availableImageAttributesByGroupCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-availableAttributesByGroupCodeStartsWith"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-byAttributeCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-allAttributeCodes"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-allNavigatableAttributeCodes"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-allSearchableAttributeCodes"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-allSearchablePrimaryAttributeCodes"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-allStorableAttributeCodes"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-singleNavigatableAttributeCodesByProductType"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-navigatableAttributeDisplayValue"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-allAttributeNames"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="attributeService-attributeNamesByCodes"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="breadCrumbBuilder-breadCrumbs"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="filteredNavigationSupport-attributeFilteredNavigationRecords"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>



    <util:map id="AttributeCUD">
        <entry key="Create" value-ref="AttributeAll"/>
        <entry key="Update" value-ref="AttributeAll"/>
        <entry key="Delete" value-ref="AttributeAll"/>
    </util:map>

    <!-- ###################### Category  ################################################################################################################## -->

    <util:set id="CategoryDeleteUpdate">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-topLevelCategories"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-currentCategoryMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-currentContentMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="breadCrumbBuilder-breadCrumbs"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-rootCategory"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopCategoryParentId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryTemplate"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopCategoryTemplate"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categorySearchTemplate"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopCategorySearchTemplate"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryProductTypeId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopCategoryProductTypeId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-searchCategoriesIds"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryNewArrivalLimit"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryNewArrivalDate"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryHasChildren"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategories"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategoriesRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategoriesRecursiveIds"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategoriesRecursiveIdsWithLinks"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryIdsWithLinks"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryHasSubcategory"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-byId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-defaultNavigationCategory"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-relationById"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryParentsIds"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryLinkedIds"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-rootContent"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentTemplate"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentBody"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributeRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributesRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContent"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContentRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContentRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-byId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentHasSubcontent"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-allCategoriesIdsMap"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-catalogCategoriesIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopCategoriesIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopContentIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopAllCategoriesIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.imageService-imageURI"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.imageService-objectImages"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.fileService-fileURI"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.fileService-objectFiles"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:set id="CategoryCreate">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-topLevelCategories"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-currentCategoryMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-currentContentMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-rootCategory"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryHasChildren"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategories"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategoriesRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategoriesRecursiveIds"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-childCategoriesRecursiveIdsWithLinks"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryIdsWithLinks"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryHasSubcategory"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-byId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-defaultNavigationCategory"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-relationById"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryParentsIds"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-categoryLinkedIds"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-rootContent"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributeRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributesRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContent"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContentRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-byId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentHasSubcontent"/>
            <constructor-arg index="1" value="all"/>
        </bean>

    </util:set>

    <util:map id="CategoryCUD">
        <entry key="Create" value-ref="CategoryCreate"/>
        <entry key="Update" value-ref="CategoryDeleteUpdate"/>
        <entry key="Delete" value-ref="CategoryDeleteUpdate"/>
    </util:map>


    <!-- ###################### Content  ################################################################################################################## -->

    <util:set id="ContentDeleteUpdate">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-currentContentMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="breadCrumbBuilder-breadCrumbs"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-rootContent"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentTemplate"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentBody"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributeRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributesRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContent"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContentRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContentRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-byId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentHasSubcontent"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopContentIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.imageService-imageURI"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.imageService-objectImages"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.fileService-fileURI"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.fileService-objectFiles"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:set id="ContentCreate">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-currentContentMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-rootContent"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributeRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentAttributesRecursive"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContent"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-childContentRecursive"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-byId"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-contentHasSubcontent"/>
            <constructor-arg index="1" value="all"/>
        </bean>

    </util:set>

    <util:map id="ContentCUD">
        <entry key="Create" value-ref="ContentCreate"/>
        <entry key="Update" value-ref="ContentDeleteUpdate"/>
        <entry key="Delete" value-ref="ContentDeleteUpdate"/>
    </util:map>


    <!-- ###################### SeoImage  ################################################################################################################## -->

    <util:set id="SeoImageAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-topLevelCategories"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="categoryService-currentCategoryMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="contentService-currentContentMenu"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="imageNameStrategy-resolveObjectCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="imageNameStrategy-resolveLocale"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="imageNameStrategy-resolveSuffix"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="SeoImageCUD">
        <entry key="Create" value-ref="SeoImageAll"/>
        <entry key="Update" value-ref="SeoImageAll"/>
        <entry key="Delete" value-ref="SeoImageAll"/>
    </util:map>

    <!-- ###################### SkuPrice  ################################################################################################################## -->

    <util:set id="SkuPriceAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="priceService-minimalPrice"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="priceService-allCurrentPrices"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="priceService-allPrices"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="filteredNavigationSupport-priceFilteredNavigationRecords"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="SkuPriceCUD">
        <entry key="Create" value-ref="SkuPriceAll"/>
        <entry key="Update" value-ref="SkuPriceAll"/>
        <entry key="Delete" value-ref="SkuPriceAll"/>
    </util:map>

    <!-- ###################### SkuWarehouse  ################################################################################################################## -->

    <util:set id="SkuWarehouseAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="skuWarehouseService-productSkusOnWarehouse"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="SkuWarehouseCUD">
        <entry key="Create" value-ref="SkuWarehouseAll"/>
        <entry key="Update" value-ref="SkuWarehouseAll"/>
        <entry key="Delete" value-ref="SkuWarehouseAll"/>
    </util:map>


    <!-- ###################### Product  ################################################################################################################## -->

    <util:set id="ProductDeleteUpdate">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-skuById"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-defaultImage"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productAttributes"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-allProductsAttributeValues"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-allProductsAttributeValues"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productCategoriesIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productAssociationsIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productAssociations"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-featuredProducts"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-newProducts"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-taggedProducts"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productBySkuCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productById"/>
            <constructor-arg index="1" value="key"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productSearchResultDTOByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productSkuService-productSkuSearchResultDTOByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productQtyByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productByIdList"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="filteredNavigationSupport-attributeFilteredNavigationRecords"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-skuById"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productSkuService-productSkuBySkuCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.imageService-imageURI"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.imageService-objectImages"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.fileService-fileURI"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="web.fileService-objectFiles"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:set id="ProductCreate">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productSearchResultDTOByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productSkuService-productSkuSearchResultDTOByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productQtyByQuery"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-productByIdList"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="filteredNavigationSupport-attributeFilteredNavigationRecords"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-skuById"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productSkuService-productSkuBySkuCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="ProductCUD">
        <entry key="Create" value-ref="ProductCreate"/>
        <entry key="Update" value-ref="ProductDeleteUpdate"/>
        <entry key="Delete" value-ref="ProductDeleteUpdate"/>
    </util:map>

    <!-- ###################### Brand  ################################################################################################################## -->

    <util:set id="BrandAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productService-brandById"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="BrandCUD">
        <entry key="Create" value-ref="BrandAll"/>
        <entry key="Update" value-ref="BrandAll"/>
        <entry key="Delete" value-ref="BrandAll"/>
    </util:map>

    <!-- ###################### ProductTypeAttr  ################################################################################################################## -->

    <util:set id="ProductTypeAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productTypeAttrService-byProductTypeId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productTypeAttrService-navigatableByProductTypeId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="productTypeAttrService-viewGroupsByProductTypeId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="ProductTypeCUD">
        <entry key="Create" value-ref="ProductTypeAll"/>
        <entry key="Update" value-ref="ProductTypeAll"/>
        <entry key="Delete" value-ref="ProductTypeAll"/>
    </util:map>

    <!-- ###################### Shop  ################################################################################################################## -->

    <util:set id="ShopAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopByCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopById"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-allShops"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-allShopsMap"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-allShopsFulfilmentMap"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-allNonSubShops"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-subShopsByMaster"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopByDomainName"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopCategoriesIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopContentIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopAllCategoriesIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="themeService-themeChainByShopId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="themeService-markupChainByShopId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="themeService-mailTemplateChainByShopId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="themeService-reportsTemplateChainByShopId"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="mailSenderBuilder-buildJavaMailSender"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="priceService-determinePricingPolicy"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopWarehouses"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopWarehousesMap"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopService-shopWarehousesIds"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="ShopCUD">
        <entry key="Create" value-ref="ShopAll"/>
        <entry key="Update" value-ref="ShopAll"/>
        <entry key="Delete" value-ref="ShopAll"/>
    </util:map>

    <!-- ###################### Promotion  ################################################################################################################## -->

    <util:set id="PromotionAll">
        <!--<bean class="org.yes.cart.domain.misc.Pair">-->
            <!--<constructor-arg index="0" value="promotionService-promotionsByShopCode"/>-->
            <!--<constructor-arg index="1" value="all"/>-->
        <!--</bean>-->
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="promotionService-factoryGetInstance"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="promotionService-groovyCache"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="PromotionCUD">
        <entry key="Create" value-ref="PromotionAll"/>
        <entry key="Update" value-ref="PromotionAll"/>
        <entry key="Delete" value-ref="PromotionAll"/>
    </util:map>

    <!-- ###################### Taxes  ################################################################################################################## -->

    <util:set id="TaxAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="taxConfigService-getTaxIdBy"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="taxService-getTaxesByShopCode"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="taxService-getById"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="TaxCUD">
        <entry key="Create" value-ref="TaxAll"/>
        <entry key="Update" value-ref="TaxAll"/>
        <entry key="Delete" value-ref="TaxAll"/>
    </util:map>

    <!-- ###################### Carrier  ################################################################################################################## -->

    <util:set id="CarrierAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="carrierService-getCarriersByShopIdAndCurrency"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="CarrierCUD">
        <entry key="Create" value-ref="CarrierAll"/>
        <entry key="Update" value-ref="CarrierAll"/>
        <entry key="Delete" value-ref="CarrierAll"/>
    </util:map>

    <util:set id="CarrierSlaAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="carrierSlaService-getById"/>
            <constructor-arg index="1" value="key"/>
        </bean>
    </util:set>

    <util:map id="CarrierSlaCUD">
        <entry key="Create" value-ref="CarrierSlaAll"/>
        <entry key="Update" value-ref="CarrierSlaAll"/>
        <entry key="Delete" value-ref="CarrierSlaAll"/>
    </util:map>

    <!-- ###################### System  ################################################################################################################## -->

    <util:set id="SystemKey">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="systemService-attributeValue"/>
            <constructor-arg index="1" value="key"/>
        </bean>
    </util:set>

    <util:map id="SystemCUD">
        <entry key="Create" value-ref="SystemKey"/>
        <entry key="Update" value-ref="SystemKey"/>
        <entry key="Delete" value-ref="SystemKey"/>
    </util:map>

    <!-- ###################### Customer  ################################################################################################################## -->

    <util:set id="CustomerAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="customerService-customerByEmail"/>
            <constructor-arg index="1" value="all"/>
        </bean>
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="priceService-determinePricingPolicy"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="CustomerCUD">
        <entry key="Create" value-ref="CustomerAll"/>
        <entry key="Update" value-ref="CustomerAll"/>
        <entry key="Delete" value-ref="CustomerAll"/>
    </util:map>

    <!-- ###################### Manager  ################################################################################################################## -->

    <util:set id="ManagerAll">
        <bean class="org.yes.cart.domain.misc.Pair">
            <constructor-arg index="0" value="shopFederationStrategy-admin"/>
            <constructor-arg index="1" value="all"/>
        </bean>
    </util:set>

    <util:map id="ManagerCUD">
        <entry key="Create" value-ref="ManagerAll"/>
        <entry key="Update" value-ref="ManagerAll"/>
        <entry key="Delete" value-ref="ManagerAll"/>
    </util:map>


    <!-- ###################### Config  ################################################################################################################## -->

    <bean id="evictionConfig" class="org.yes.cart.utils.spring.LinkedHashMapBean">
        <constructor-arg>
            <util:map>
                <entry key="AttributeEntity"           value-ref="AttributeCUD"/>
                <entry key="CategoryEntity"            value-ref="CategoryCUD"/>
                <entry key="AttrValueEntityCategory"   value-ref="CategoryCUD"/>
                <entry key="ContentEntity"             value-ref="ContentCUD"/>
                <entry key="AttrValueEntityContent"    value-ref="ContentCUD"/>
                <entry key="SeoImageEntity"            value-ref="SeoImageCUD"/>
                <entry key="SkuPriceEntity"            value-ref="SkuPriceCUD"/>
                <entry key="SkuWarehouseEntity"        value-ref="SkuWarehouseCUD"/>
                <entry key="ProductEntity"             value-ref="ProductCUD"/>
                <entry key="ProductSkuEntity"          value-ref="ProductCUD"/>
                <entry key="AttrValueEntityProduct"    value-ref="ProductCUD"/>
                <entry key="AttrValueEntityProductSku" value-ref="ProductCUD"/>
                <entry key="ProductTypeEntity"         value-ref="ProductTypeCUD"/>
                <entry key="BrandEntity"               value-ref="BrandCUD"/>
                <entry key="ShopEntity"                value-ref="ShopCUD"/>
                <entry key="AttrValueEntityShop"       value-ref="ShopCUD"/>
                <entry key="PromotionEntity"           value-ref="PromotionCUD"/>
                <entry key="AttrValueEntitySystem"     value-ref="SystemCUD"/>
                <entry key="TaxEntity"                 value-ref="TaxCUD"/>
                <entry key="TaxConfigEntity"           value-ref="TaxCUD"/>
                <entry key="CarrierEntity"             value-ref="CarrierCUD"/>
                <entry key="CarrierShopEntity"         value-ref="CarrierCUD"/>
                <entry key="CarrierSlaEntity"          value-ref="CarrierSlaCUD"/>
                <entry key="CustomerEntity"            value-ref="CustomerCUD"/>
                <entry key="CustomerShopEntity"        value-ref="CustomerCUD"/>
                <entry key="AttrValueEntityCustomer"   value-ref="CustomerCUD"/>
                <entry key="AddressEntity"             value-ref="CustomerCUD"/>
                <entry key="ManagerEntity"             value-ref="ManagerCUD"/>
                <entry key="ManagerRoleEntity"         value-ref="ManagerCUD"/>
                <entry key="ManagerShopEntity"         value-ref="ManagerCUD"/>
            </util:map>
        </constructor-arg>
    </bean>

    <import resource="classpath*:cache-config-ext.xml"/>

    <!-- ################################ Register module  ####################################################### -->

    <bean class="org.yes.cart.env.impl.ModuleImpl">
        <property name="functionalArea" value="core"/>
        <property name="name" value="core"/>
        <property name="subName" value="cache-config"/>
    </bean>

</beans>